You are testing the Azure Deploy Copilot Skill (full suite).

Source files: PRD JSON (in context), progress.txt

## SKILL FILES TO EDIT

- `SKILL.md` (root) - main skill definition
- `skills/azure-deploy/SKILL.md` - copy of skill (keep in sync)
- `reference/*.md` - detailed service guides:
  - `reference/static-web-apps.md`
  - `reference/app-service.md`
  - `reference/functions.md`
  - `reference/local-preview.md`
  - `reference/multi-service.md`

## STEPS

1. Grep PRD for `"passes": false` - if none found, output `<promise>COMPLETE</promise>` and stop.
2. Take the FIRST failing test.
3. Execute based on category:
   - **detection**: Check scenario files against SKILL.md "Phase 1: Application Detection"
   - **local-preview**: Start dev server per SKILL.md "Phase 2", validate with curl
   - **deployment**: Deploy to Azure per SKILL.md "Phase 3+", validate with curl, clean up

## IF TEST PASSES
- Set that PRD item to `"passes": true`
- Append to progress.txt: `[DATE] PASS: <scenario> - <category>`
- Git commit: `test: mark <scenario> <category> passing`

## IF TEST FAILS - EDIT THE SKILL

**Find sections by searching for headers (not line numbers):**

Detection fixes:
- Search `**Node.js / JavaScript / TypeScript:**` for JS patterns
- Search `**Python:**` for Python patterns
- Search `### Step 1.3: Detect Multi-Service` for monorepo patterns
- Add pattern: `├── <signal> → <type> → <Azure Service>`

Local preview fixes:
- Search `## Phase 2: Local Preview` in SKILL.md
- Search `reference/local-preview.md` for detailed commands

Deployment fixes:
- Search `## Static Web Apps Deployment` / `## App Service Deployment` / etc.
- Update corresponding `reference/<service>.md` for details

**After editing:**
- Verify fix by re-running the test
- Keep both SKILL.md files in sync (root and skills/azure-deploy/)
- Set PRD item to `"passes": true`
- Append to progress.txt: `[DATE] FIX: <scenario> - <what was fixed>`
- Git commit: `fix(skill): <description>`

## RULES
- ONE test per iteration
- Only output `<promise>COMPLETE</promise>` if zero `"passes": false` remain
- Use centralus for Static Web Apps
- Always clean up Azure resources after deployment tests
